(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6047],{6398:function(e,t,a){Promise.resolve().then(a.bind(a,9162))},9162:function(e,t,a){"use strict";a.r(t);var r=a(7437),n=a(2265),s=a(4033),o=a(1865),i=a(6124);t.default=()=>{var e,t,a,c,l,d,u,p;let[h,x]=(0,n.useState)(!1),[f,m]=(0,n.useState)({status:"",text:""}),w=(0,s.useRouter)(),{register:y,handleSubmit:b,formState:{errors:g}}=(0,o.cI)(),v=(0,s.useSearchParams)(),j=v.get("token"),N=async e=>{let t={new_password:e.newPassword,confirm_password:e.compareNewPassword},a=await (0,i.tq)("?token="+j,t);a.status?(x(!0),m({status:"success",text:"Berhasil memperbarui password."}),setTimeout(()=>{m({status:"",text:""}),w.push("/profile")},2e3)):(x(!1),m({status:"error",text:a.message}),setTimeout(()=>{m({status:"",text:""})},2e3))};return(0,r.jsxs)("div",{className:"bg-white border flex flex-col py-10 px-10 items-center justify-center rounded-[87px] border-tertiary border-opacity-30 shadow-[-6px_8px_4px_0px_#00000040] w-full",children:[""!==f.text&&(0,r.jsx)("div",{className:"fixed top-20 right-5 z-[999]",children:(0,r.jsx)("div",{className:"alert ".concat("success"===f.status?"alert-success":"alert-error"," flex justify-center px-10 py-4 shadow-lg"),children:(0,r.jsx)("small",{children:(0,r.jsx)("strong",{children:f.text})})})}),(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h3",{className:"text-primary font-semibold text-[32px] leading-[39px]",children:"Ubah Kata Sandi"})}),(0,r.jsx)("div",{className:"w-[60%]",children:(0,r.jsx)("span",{className:"text-tertiary_dark text-sm",children:"Kata sandi Anda harus lebih dari delapan karakter dan berisi kombinasi angka, huruf,dan karakter khusus (!$@%)"})}),(0,r.jsxs)("form",{className:"space-y-4",onSubmit:b(N),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"password",className:"w-full bg-white border-[3px] border-primary rounded-2xl px-5 py-2 focus:outline-none text-tertiary_dark font-normal text-base",placeholder:"Kata sandi baru",...y("newPassword",{required:!0,minLength:8,pattern:/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!$@%])[a-zA-Z0-9!$@%]+$/gm})}),(null==g?void 0:null===(e=g.newPassword)||void 0===e?void 0:e.type)==="required"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"This field is required"}),(null==g?void 0:null===(t=g.newPassword)||void 0===t?void 0:t.type)==="minLength"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"Password length should be at least 8 characters"}),(null==g?void 0:null===(a=g.newPassword)||void 0===a?void 0:a.type)==="pattern"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"should contains special characters(!$@%), lower case(a-z), upper case(A-Z) and numbers (0-9)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"password",className:"w-full bg-white border-[3px] border-primary rounded-2xl px-5 py-2 focus:outline-none text-tertiary_dark font-normal text-base",placeholder:"Tulis ulang kata sandi baru",...y("compareNewPassword",{required:!0,minLength:8,pattern:/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!$@%])[a-zA-Z0-9!$@%]+$/gm,validate:(e,t)=>e===(null==t?void 0:t.newPassword)||"Passwords do not match"})}),(null==g?void 0:null===(c=g.compareNewPassword)||void 0===c?void 0:c.type)==="required"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"This field is required"}),(null==g?void 0:null===(l=g.compareNewPassword)||void 0===l?void 0:l.type)==="minLength"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"Password length should be at least 8 characters"}),(null==g?void 0:null===(d=g.compareNewPassword)||void 0===d?void 0:d.type)==="pattern"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"should contains special characters(!$@%), lower case(a-z), upper case(A-Z) and numbers (0-9)"}),(null==g?void 0:null===(u=g.compareNewPassword)||void 0===u?void 0:u.type)==="validate"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:null==g?void 0:null===(p=g.compareNewPassword)||void 0===p?void 0:p.message})]}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-evenly pt-3 items-center",children:[(0,r.jsx)("button",{type:"button",className:"mt-4 md:mt-0 btn btn-md px-12 bg-white hover:bg-white border-[3px] hover:border-primary border-primary text-primary rounded-full capitalize shadow-[0px_4px_4px_0px_#00000040]",onClick:()=>{w.push("/")},children:"Kembali"}),(0,r.jsx)("button",{disabled:h,type:"submit",className:"mt-4 md:mt-0 btn btn-md px-12 bg-primary hover:bg-primary_light hover:border-transparent border-transparent text-white rounded-full capitalize shadow-[0px_4px_4px_0px_#00000040]",children:"Ubah Kata Sandi"})]})]})]})]})}},6124:function(e,t,a){"use strict";a.d(t,{CY:function(){return i},aX:function(){return s},k0:function(){return o},m3:function(){return n},oP:function(){return c},tq:function(){return l},w2:function(){return d}});var r=a(4759);let n=async e=>{let t=await (0,r.Gz)("/login",e);return t},s=async e=>{let t=await (0,r.Gz)("/register",e);return t},o=async e=>{let t=await (0,r.d1)("/update-profile",e);return t},i=async e=>{let t=await (0,r.J7)("/update-password",e);return t},c=async e=>{let t=await (0,r.Gz)("/forgot-password",e);return t},l=async(e,t)=>{let a=await (0,r.Gz)("/reset-password"+e,t);return a},d=async e=>{let t=await (0,r.sP)("/check-user",e);return t}},4759:function(e,t,a){"use strict";a.d(t,{Gz:function(){return i},J7:function(){return l},JF:function(){return h},ak:function(){return u},d1:function(){return d},eO:function(){return o},sP:function(){return c},sU:function(){return p}});let r="https://staging.gerai.neracaruang.com/api",n="https://sso.otonometer.neracaruang.com/",s=()=>{if("undefined"!=typeof localStorage){let t=localStorage.getItem("userData");if(void 0!==t){var e;let a=null!==(e=JSON.parse(t))&&void 0!==e?e:"{}";return a.token}return""}},o=async e=>{try{let t=await fetch("".concat(r).concat(e),{method:"GET"});return t.json()}catch(e){return console.error("Error fetching data:",e),e}},i=async(e,t)=>{try{let a=await fetch("".concat(r).concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}),n=await a.json();return n}catch(e){return console.log("Error fetching data:",e),e}},c=async function(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t=""!==a?a:s();try{let a=await fetch("".concat(r).concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}),n=await a.json();return n}catch(e){return console.error("Error fetching data:",e),e}},l=async(e,t)=>{let a=s();try{let n=await fetch("".concat(r).concat(e),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)});return n.json()}catch(e){return console.error("Error fetching data:",e),e}},d=async(e,t)=>{let a=s(),n=new FormData;for(let e in t)if("object"==typeof t[e]){if(t[e]instanceof File)n.append(e,t[e]);else if(null!==t[e])for(let a=0;a<t[e].length;a++)n.append(e,t[e][a])}else n.append(e,t[e]);try{let t=await fetch("".concat(r).concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:n});return t.json()}catch(e){}},u=async()=>{window.location.href="".concat(n,"connect?id=").concat("71")},p=async e=>{try{let t=await fetch("".concat(n,"oauth/token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();return a}catch(t){let e={isError:!0,message:t.message};return e}},h=()=>{window.location.href="".concat(n,"logout")}}},function(e){e.O(0,[5876,2971,4123,1744],function(){return e(e.s=6398)}),_N_E=e.O()}]);