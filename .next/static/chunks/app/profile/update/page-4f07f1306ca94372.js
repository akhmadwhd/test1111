(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{533:function(e,l,t){Promise.resolve().then(t.bind(t,6441))},6441:function(e,l,t){"use strict";t.r(l);var s=t(7437),i=t(2265),a=t(4033),d=t(1865),r=t(9701),n=t(5691),o=t(2067),c=t.n(o),u=t(6691),x=t.n(u),v=t(3305),p=t(9450),m=t(6124),h=t(7630);let C=n.Ry({name:n.Z_().nullable(),email:n.Z_(),dob:n.Z_().nullable(),phone:n.Z_().nullable(),province:n.Z_().nullable(),city:n.Z_().nullable(),postal_code:n.Z_().nullable()}).required();l.default=()=>{var e,l,t,n,o,u,b,f,j,y,w,g,N,_,Z,E;let F=(0,a.usePathname)(),{setData:k}=(0,h.useAuth)(),{register:S,handleSubmit:M,setValue:P,formState:{errors:K}}=(0,d.cI)({resolver:(0,r.X)(C)}),D=(0,a.useRouter)(),[A,R]=(0,i.useState)(null),[T,z]=(0,i.useState)(!1),[B,I]=(0,i.useState)(),[O,H]=(0,i.useState)(null),[L,V]=(0,i.useState)(null),[J,U]=(0,i.useState)({status:"",text:""}),q=async()=>{let e=await (0,p.tH)();if(e){var l,t,s,i,a,d,r;R(e);let n=JSON.parse(localStorage.getItem("userData"));if(n&&(localStorage.setItem("userData",JSON.stringify({token:n.token,...e})),k({token:n.token,...e})),P("name",null==e?void 0:e.name),P("phone",null==e?void 0:null===(l=e.profile)||void 0===l?void 0:l.phone),P("postal_code",null==e?void 0:null===(t=e.profile)||void 0===t?void 0:t.postal_code),P("dob",null==e?void 0:null===(s=e.profile)||void 0===s?void 0:s.dob),P("city",null==e?void 0:null===(a=e.profile)||void 0===a?void 0:null===(i=a.cities)||void 0===i?void 0:i.id),P("province",null==e?void 0:null===(r=e.profile)||void 0===r?void 0:null===(d=r.province)||void 0===d?void 0:d.id),null==e?void 0:e.image){let l=(null==e?void 0:e.image.includes("https"))?null==e?void 0:e.image:"https://staging.gerai.neracaruang.com//"+(null==e?void 0:e.image);V(l)}}},G=e=>{let l=e.target.files[0];if(H(l),l&&l.type.startsWith("image/")){let e=new FileReader;e.onload=e=>{let l=e.target.result;V(l)},e.readAsDataURL(l)}},W=async e=>{let l="";if(""===e.phone?l="Phone":""==e.name&&(l="Nama"),""===l){let l={image:O,...e},s=await (0,m.k0)(l);if(s)z(!1),U({status:"success",text:"Berhasil Menambah Data"}),q();else{var t;U({status:"error",text:null!==(t=null==s?void 0:s.message)&&void 0!==t?t:"Terjadi Kesalahan, Hubungi Administrator"})}}else U({status:"error",text:"".concat(l," Harus Diisi")});setTimeout(()=>{U({status:"",text:""})},2e3)};return(0,i.useEffect)(()=>{q()},[F]),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row space-y-6 md:space-y-0 justify-between items-center w-full",children:[""!==J.text&&(0,s.jsx)("div",{className:"fixed top-20 right-5 z-[999]",children:(0,s.jsx)("div",{className:"alert ".concat("success"===J.status?"alert-success":"alert-error"," flex justify-center px-10 py-4 shadow-lg"),children:(0,s.jsx)("small",{children:(0,s.jsx)("strong",{children:J.text})})})}),(0,s.jsxs)("div",{className:"bg-white border flex flex-col py-5 items-center justify-center rounded-2xl border-tertiary border-opacity-30 shadow-[-6px_8px_4px_0px_#00000040] w-full md:w-[45%] h-[462px]",children:[(0,s.jsxs)("div",{className:"cursor-pointer",onClick:()=>{T&&document.getElementById("upload").click()},children:[(0,s.jsx)("input",{type:"file",className:"hidden",id:"upload",onChange:e=>{G(e)}}),L?(0,s.jsxs)("div",{className:"relative flex justify-center items-center",children:[(0,s.jsx)(x(),{src:L,width:230,height:230,alt:"profile",className:"rounded-full object-cover w-[230px] h-[230px] border-4 border-primary shadow-md"}),(0,s.jsx)("div",{className:"absolute opacity-70",children:(0,s.jsxs)("svg",{width:"50",height:"50",viewBox:"0 0 72 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M71.3309 13.0668C70.4642 8.99868 67.3847 6.46608 63.2472 6.44925C60.113 6.43663 56.9788 6.44925 53.8446 6.44505C53.365 6.44505 52.7907 6.56705 52.4331 6.34829C52.1387 6.16739 52.2649 5.54265 52.2144 5.11143C52.2039 5.02098 52.1597 4.93684 52.1344 4.8485C51.3078 1.90992 49.0991 0.164028 45.9376 0.142993C39.3473 0.0988195 32.755 0.138786 26.1648 0.126165C22.4248 0.119854 19.8459 2.88174 19.7344 6.00331C19.7155 6.52919 19.4042 6.44505 19.0907 6.44505C15.7252 6.44505 12.3617 6.44715 8.99609 6.44294C8.30194 6.44294 7.612 6.48291 6.93678 6.63226C3.22832 7.46314 0.647342 10.713 0.641032 14.5856C0.630515 21.7059 0.638929 28.8283 0.638929 35.9486C0.638929 39.8905 0.643136 43.8304 0.636825 47.7723C0.634722 49.5287 1.08276 51.1463 2.15765 52.5472C3.90144 54.8211 6.22369 55.8834 9.09495 55.8792C22.4395 55.8602 35.7819 55.8707 49.1265 55.8707C53.8046 55.8707 58.4828 55.8623 63.1609 55.8728C66.6738 55.8813 69.158 54.2595 70.7314 51.161C71.0974 50.4416 71.2068 49.6402 71.455 48.885C71.455 36.9898 71.455 25.0946 71.455 13.1994C71.4129 13.1573 71.3414 13.1173 71.3309 13.0668ZM67.9506 47.4399C67.9422 49.8211 66.8547 51.4786 64.6439 52.1307C64.0907 52.2948 63.5101 52.3116 62.9338 52.3116C53.9666 52.3095 44.9994 52.3095 36.0322 52.3095C27.0188 52.3095 18.0053 52.3116 8.99188 52.3074C6.55815 52.3053 4.87746 51.0664 4.32635 48.904C4.21696 48.4728 4.21696 48.0352 4.21696 47.5998C4.21486 36.6512 4.21276 25.7004 4.21696 14.7517C4.21907 11.8237 6.02807 10.0273 8.96454 10.0231C13.0222 10.0189 17.0798 10.0231 21.1353 10.021C22.7129 10.021 23.3819 9.34365 23.3903 7.74921C23.3924 7.21913 23.3734 6.68695 23.4092 6.15897C23.5165 4.59398 24.482 3.67685 26.0428 3.6432C26.7348 3.62847 27.4269 3.63899 28.1168 3.63899C33.9498 3.63899 39.7807 3.63899 45.6136 3.63899C47.8875 3.63899 48.7689 4.53087 48.7689 6.82999C48.7689 7.22123 48.7647 7.61459 48.7689 8.00584C48.7815 9.26793 49.5219 10.0168 50.7882 10.0189C54.9615 10.0252 59.1328 10.0231 63.3061 10.021C64.8227 10.021 66.089 10.5384 67.044 11.7543C67.7171 12.6104 67.959 13.6032 67.959 14.6592C67.9674 25.5868 67.9842 36.5144 67.9506 47.4399Z",fill:"#FEFEFE"}),(0,s.jsx)("path",{d:"M60.027 14.5557C61.8486 14.5641 63.3084 16.0323 63.3 17.8498C63.2937 19.6672 61.8276 21.1144 59.9954 21.1102C58.1864 21.1081 56.6993 19.6167 56.714 17.8182C56.7266 16.0155 58.218 14.5473 60.027 14.5557Z",fill:"#FEFEFE"}),(0,s.jsx)("path",{d:"M36.1526 14.6233C27.1517 14.5392 19.6255 21.63 19.4824 31.0726C19.5161 40.0776 26.5396 47.6544 35.9717 47.707C44.8631 47.7554 52.5114 40.7781 52.5892 31.2913C52.6629 22.2506 45.5972 14.7116 36.1526 14.6233ZM36.0116 44.1626C28.8493 44.1163 23.1004 38.3317 23.1383 31.2093C23.1761 24.0238 28.9018 18.3065 36.0516 18.3128C43.2413 18.3191 48.9565 24.0659 48.9544 31.2892C48.9523 38.418 43.1319 44.2089 36.0116 44.1626Z",fill:"#FEFEFE"})]})})]}):(0,s.jsx)("div",{className:"bg-primary w-[230px] h-[230px] rounded-full p-2 cursor-pointer",children:(0,s.jsx)("div",{className:"border-2 border-white rounded-full w-full h-full flex items-center justify-center",children:(0,s.jsxs)("svg",{width:"72",height:"56",viewBox:"0 0 72 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M71.3309 13.0668C70.4642 8.99868 67.3847 6.46608 63.2472 6.44925C60.113 6.43663 56.9788 6.44925 53.8446 6.44505C53.365 6.44505 52.7907 6.56705 52.4331 6.34829C52.1387 6.16739 52.2649 5.54265 52.2144 5.11143C52.2039 5.02098 52.1597 4.93684 52.1344 4.8485C51.3078 1.90992 49.0991 0.164028 45.9376 0.142993C39.3473 0.0988195 32.755 0.138786 26.1648 0.126165C22.4248 0.119854 19.8459 2.88174 19.7344 6.00331C19.7155 6.52919 19.4042 6.44505 19.0907 6.44505C15.7252 6.44505 12.3617 6.44715 8.99609 6.44294C8.30194 6.44294 7.612 6.48291 6.93678 6.63226C3.22832 7.46314 0.647342 10.713 0.641032 14.5856C0.630515 21.7059 0.638929 28.8283 0.638929 35.9486C0.638929 39.8905 0.643136 43.8304 0.636825 47.7723C0.634722 49.5287 1.08276 51.1463 2.15765 52.5472C3.90144 54.8211 6.22369 55.8834 9.09495 55.8792C22.4395 55.8602 35.7819 55.8707 49.1265 55.8707C53.8046 55.8707 58.4828 55.8623 63.1609 55.8728C66.6738 55.8813 69.158 54.2595 70.7314 51.161C71.0974 50.4416 71.2068 49.6402 71.455 48.885C71.455 36.9898 71.455 25.0946 71.455 13.1994C71.4129 13.1573 71.3414 13.1173 71.3309 13.0668ZM67.9506 47.4399C67.9422 49.8211 66.8547 51.4786 64.6439 52.1307C64.0907 52.2948 63.5101 52.3116 62.9338 52.3116C53.9666 52.3095 44.9994 52.3095 36.0322 52.3095C27.0188 52.3095 18.0053 52.3116 8.99188 52.3074C6.55815 52.3053 4.87746 51.0664 4.32635 48.904C4.21696 48.4728 4.21696 48.0352 4.21696 47.5998C4.21486 36.6512 4.21276 25.7004 4.21696 14.7517C4.21907 11.8237 6.02807 10.0273 8.96454 10.0231C13.0222 10.0189 17.0798 10.0231 21.1353 10.021C22.7129 10.021 23.3819 9.34365 23.3903 7.74921C23.3924 7.21913 23.3734 6.68695 23.4092 6.15897C23.5165 4.59398 24.482 3.67685 26.0428 3.6432C26.7348 3.62847 27.4269 3.63899 28.1168 3.63899C33.9498 3.63899 39.7807 3.63899 45.6136 3.63899C47.8875 3.63899 48.7689 4.53087 48.7689 6.82999C48.7689 7.22123 48.7647 7.61459 48.7689 8.00584C48.7815 9.26793 49.5219 10.0168 50.7882 10.0189C54.9615 10.0252 59.1328 10.0231 63.3061 10.021C64.8227 10.021 66.089 10.5384 67.044 11.7543C67.7171 12.6104 67.959 13.6032 67.959 14.6592C67.9674 25.5868 67.9842 36.5144 67.9506 47.4399Z",fill:"#FEFEFE"}),(0,s.jsx)("path",{d:"M60.027 14.5557C61.8486 14.5641 63.3084 16.0323 63.3 17.8498C63.2937 19.6672 61.8276 21.1144 59.9954 21.1102C58.1864 21.1081 56.6993 19.6167 56.714 17.8182C56.7266 16.0155 58.218 14.5473 60.027 14.5557Z",fill:"#FEFEFE"}),(0,s.jsx)("path",{d:"M36.1526 14.6233C27.1517 14.5392 19.6255 21.63 19.4824 31.0726C19.5161 40.0776 26.5396 47.6544 35.9717 47.707C44.8631 47.7554 52.5114 40.7781 52.5892 31.2913C52.6629 22.2506 45.5972 14.7116 36.1526 14.6233ZM36.0116 44.1626C28.8493 44.1163 23.1004 38.3317 23.1383 31.2093C23.1761 24.0238 28.9018 18.3065 36.0516 18.3128C43.2413 18.3191 48.9565 24.0659 48.9544 31.2892C48.9523 38.418 43.1319 44.2089 36.0116 44.1626Z",fill:"#FEFEFE"})]})})})]}),(0,s.jsx)("div",{className:"py-5",children:(0,s.jsx)("h3",{className:"text-center font-bold text-primary shadow-text text-[32px] leading-[39px]",children:null==A?void 0:A.name})})]}),(0,s.jsx)("div",{className:"w-full md:w-[50%] bg-white border flex flex-col items-center justify-center rounded-2xl border-tertiary border-opacity-30 shadow-[-6px_8px_4px_0px_#00000040] h-[462px]",children:(0,s.jsxs)("form",{className:"flex flex-col w-[80%] space-y-3",onSubmit:M(W),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"w-[30%] font-semibold text-base text-secondary",children:"Email"}),(0,s.jsx)("div",{className:" w-[80%] lg:w-[70%]",children:(0,s.jsx)(v.Z,{type:"text",className:"text-center",register:{disabled:"disabled",value:null==A?void 0:A.email}})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"w-[30%] font-semibold text-base text-secondary",children:"Nama"}),(0,s.jsx)("div",{className:"flex flex-col justify-center w-[80%] lg:w-[70%]",children:(0,s.jsx)(v.Z,{type:"text",className:"text-center",placeholder:"Nama",register:{...!T&&{disabled:"disabled"},...S("name")}})})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("label",{className:"w-[30%] font-semibold text-base text-secondary",children:"Tanggal Lahir"}),(0,s.jsx)("div",{className:"w-[80%] lg:w-[70%]",children:T?(0,s.jsx)(v.Z,{type:"date_test",name:"dob",className:"text-center",register:{value:(null==A?void 0:null===(e=A.profile)||void 0===e?void 0:e.dob)!==null?c()(null==A?void 0:null===(l=A.profile)||void 0===l?void 0:l.dob).toDate():null,...!T&&{disabled:!0},...S("dob")},dateValue:e=>{P("dob",e)}}):(0,s.jsx)(v.Z,{type:"text",className:"text-center",register:{disabled:"disabled",value:(null==A?void 0:null===(t=A.profile)||void 0===t?void 0:t.dob)!==null?c()(null==A?void 0:null===(n=A.profile)||void 0===n?void 0:n.dob).format("DD-MM-yyyy"):"Tanggal Lahir"}})})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("label",{className:"w-[30%] font-semibold text-base text-secondary",children:"Telepon"}),(0,s.jsx)("div",{className:"flex flex-col justify-center w-[80%] lg:w-[70%]",children:(0,s.jsx)(v.Z,{type:"text",className:"text-center",placeholder:"Phone",register:{...!T&&{disabled:"disabled"},...S("phone")}})})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("label",{className:"w-[30%] font-semibold text-base text-secondary",children:"Provinsi"}),(0,s.jsx)("div",{className:"w-[80%] lg:w-[70%]",children:T?(0,s.jsx)(v.Z,{placeholder:"Provinsi",type:"select-province",setValue:e=>{P("province",e),I(e)},selectProv:{id:null==A?void 0:null===(u=A.profile)||void 0===u?void 0:null===(o=u.province)||void 0===o?void 0:o.id,province_name:null==A?void 0:null===(f=A.profile)||void 0===f?void 0:null===(b=f.province)||void 0===b?void 0:b.province_name}}):(0,s.jsx)(v.Z,{type:"text",className:"text-center",register:{disabled:"disabled",value:null==A?void 0:null===(y=A.profile)||void 0===y?void 0:null===(j=y.province)||void 0===j?void 0:j.province_name}})})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("label",{className:"w-[30%] font-semibold text-base text-secondary",children:"Kab/Kota"}),(0,s.jsx)("div",{className:"w-[80%] lg:w-[70%]",children:T?(0,s.jsx)(v.Z,{placeholder:"Kab/Kota",type:"select-kab",setValue:e=>{P("city",e)},valueKab:B,selectKab:{id:null==A?void 0:null===(g=A.profile)||void 0===g?void 0:null===(w=g.cities)||void 0===w?void 0:w.id,city_name:null==A?void 0:null===(_=A.profile)||void 0===_?void 0:null===(N=_.cities)||void 0===N?void 0:N.city_name}}):(0,s.jsx)(v.Z,{type:"text",className:"text-center",register:{disabled:"disabled",value:null==A?void 0:null===(E=A.profile)||void 0===E?void 0:null===(Z=E.cities)||void 0===Z?void 0:Z.city_name}})})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("label",{className:"w-[30%] font-semibold text-base text-secondary",children:"Kode Pos"}),(0,s.jsx)("div",{className:"w-[80%] lg:w-[70%]",children:(0,s.jsx)(v.Z,{type:"text",className:"text-center",placeholder:"Kode Pos",register:{...!T&&{disabled:"disabled"},...S("postal_code")}})})]}),(0,s.jsxs)("div",{className:"flex justify-evenly pt-5",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-md px-12 bg-white hover:bg-white border-[3px] hover:border-primary border-primary text-primary rounded-full capitalize shadow-[0px_4px_4px_0px_#00000040]",onClick:()=>{D.push("/profile")},children:"Kembali"}),T?(0,s.jsx)("input",{type:"submit",className:"btn btn-md px-12 bg-primary hover:bg-primary_light hover:border-transparent border-transparent text-white rounded-full capitalize shadow-[0px_4px_4px_0px_#00000040]",value:"save"}):(0,s.jsx)("button",{className:"btn btn-md px-12 bg-primary hover:bg-primary_light hover:border-transparent border-transparent text-white rounded-full capitalize shadow-[0px_4px_4px_0px_#00000040]",onClick:()=>{z(!0)},children:"Update"})]})]})})]})}},7630:function(e,l,t){"use strict";t.r(l),t.d(l,{AuthProvider:function(){return n},useAuth:function(){return o}});var s=t(7437),i=t(9450),a=t(4033),d=t(2265);let r=(0,d.createContext)(),n=e=>{let{children:l}=e,t=(0,a.useRouter)(),[n,o]=(0,d.useState)(!1),[c,u]=(0,d.useState)(null),x=async()=>{let e=await (0,i.PG)();null===e?t.push("/"):(u(e),o(!0))};return(0,d.useEffect)(()=>{x()},[]),(0,s.jsx)(r.Provider,{value:{userData:c,setData:e=>{u(e)}},children:n&&(0,s.jsx)("div",{children:l})})},o=()=>(0,d.useContext)(r)}},function(e){e.O(0,[2306,6990,5876,6691,4769,6324,2971,4123,1744],function(){return e(e.s=533)}),_N_E=e.O()}]);