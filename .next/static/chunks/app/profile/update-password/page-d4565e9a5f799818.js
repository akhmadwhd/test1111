(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8263],{7829:function(e,t,a){Promise.resolve().then(a.bind(a,8213))},8213:function(e,t,a){"use strict";a.r(t);var r=a(7437),n=a(2265),s=a(4033),o=a(1865),i=a(9450);t.default=()=>{var e,t,a,l,c,d,u,p,f;let[h,x]=(0,n.useState)(!0),w=(0,s.useRouter)(),{register:m,handleSubmit:y,formState:{errors:v}}=(0,o.cI)(),b=async e=>{let t={old_password:e.currentPassword,new_password:e.newPassword,confirm_password:e.compareNewPassword},a=await (0,i.fM)(t);a.status?(x(!0),w.push("/profile")):x(!1)};return(0,r.jsx)("div",{className:"bg-white border flex flex-col py-10 px-10 items-center justify-center rounded-[87px] border-tertiary border-opacity-30 shadow-[-6px_8px_4px_0px_#00000040] w-full",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h3",{className:"text-primary font-semibold text-[32px] leading-[39px]",children:"Ubah Kata Sandi"})}),(0,r.jsx)("div",{className:"w-[60%]",children:(0,r.jsx)("span",{className:"text-tertiary_dark text-sm",children:"Kata sandi Anda harus lebih dari delapan karakter dan berisi kombinasi angka, huruf,dan karakter khusus (!$@%)"})}),(0,r.jsxs)("form",{className:"space-y-4",onSubmit:y(b),children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("input",{type:"password",className:"w-full bg-white border-[3px] border-primary rounded-2xl px-5 py-2 focus:outline-none text-tertiary_dark font-normal text-base",placeholder:"Kata sandi saat ini",...m("currentPassword",{required:!0,onChange:e=>{var t,a;return(null==e?void 0:null===(a=e.target)||void 0===a?void 0:null===(t=a.value)||void 0===t?void 0:t.length)>0?x(!1):x(!0)}})}),(null==v?void 0:null===(e=v.currentPassword)||void 0===e?void 0:e.type)==="required"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"This field is required"}),(0,r.jsx)("span",{className:"w-full text-center text-[#0245C8] text-[15px]",children:"Lupa kata sandi Anda?"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"password",className:"w-full bg-white border-[3px] border-primary rounded-2xl px-5 py-2 focus:outline-none text-tertiary_dark font-normal text-base",placeholder:"Kata sandi baru",...m("newPassword",{required:!0,minLength:8,pattern:/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!$@%])[a-zA-Z0-9!$@%]+$/gm})}),(null==v?void 0:null===(t=v.newPassword)||void 0===t?void 0:t.type)==="required"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"This field is required"}),(null==v?void 0:null===(a=v.newPassword)||void 0===a?void 0:a.type)==="minLength"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"Password length should be at least 8 characters"}),(null==v?void 0:null===(l=v.newPassword)||void 0===l?void 0:l.type)==="pattern"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"should contains special characters(!$@%), lower case(a-z), upper case(A-Z) and numbers (0-9)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"password",className:"w-full bg-white border-[3px] border-primary rounded-2xl px-5 py-2 focus:outline-none text-tertiary_dark font-normal text-base",placeholder:"Tulis ulang kata sandi baru",...m("compareNewPassword",{required:!0,minLength:8,pattern:/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!$@%])[a-zA-Z0-9!$@%]+$/gm,validate:(e,t)=>e===(null==t?void 0:t.newPassword)||"Passwords do not match"})}),(null==v?void 0:null===(c=v.compareNewPassword)||void 0===c?void 0:c.type)==="required"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"This field is required"}),(null==v?void 0:null===(d=v.compareNewPassword)||void 0===d?void 0:d.type)==="minLength"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"Password length should be at least 8 characters"}),(null==v?void 0:null===(u=v.compareNewPassword)||void 0===u?void 0:u.type)==="pattern"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:"should contains special characters(!$@%), lower case(a-z), upper case(A-Z) and numbers (0-9)"}),(null==v?void 0:null===(p=v.compareNewPassword)||void 0===p?void 0:p.type)==="validate"&&(0,r.jsx)("span",{className:"text-red-700 text-left w-full px-5 text-sm",children:null==v?void 0:null===(f=v.compareNewPassword)||void 0===f?void 0:f.message})]}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-evenly pt-3 items-center",children:[(0,r.jsx)("button",{type:"button",className:"mt-4 md:mt-0 btn btn-md px-12 bg-white hover:bg-white border-[3px] hover:border-primary border-primary text-primary rounded-full capitalize shadow-[0px_4px_4px_0px_#00000040]",onClick:()=>{w.push("/profile")},children:"Kembali"}),(0,r.jsx)("button",{disabled:h,type:"submit",className:"mt-4 md:mt-0 btn btn-md px-12 bg-primary hover:bg-primary_light hover:border-transparent border-transparent text-white rounded-full capitalize shadow-[0px_4px_4px_0px_#00000040]",children:"Ubah Kata Sandi"})]})]})]})})}},6124:function(e,t,a){"use strict";a.d(t,{CY:function(){return i},aX:function(){return s},k0:function(){return o},m3:function(){return n},oP:function(){return l},tq:function(){return c},w2:function(){return d}});var r=a(4759);let n=async e=>{let t=await (0,r.Gz)("/login",e);return t},s=async e=>{let t=await (0,r.Gz)("/register",e);return t},o=async e=>{let t=await (0,r.d1)("/update-profile",e);return t},i=async e=>{let t=await (0,r.J7)("/update-password",e);return t},l=async e=>{let t=await (0,r.Gz)("/forgot-password",e);return t},c=async(e,t)=>{let a=await (0,r.Gz)("/reset-password"+e,t);return a},d=async e=>{let t=await (0,r.sP)("/check-user",e);return t}},9450:function(e,t,a){"use strict";a.d(t,{IK:function(){return o},PG:function(){return i},RD:function(){return d},fM:function(){return c},ko:function(){return s},tH:function(){return l}});var r=a(4759),n=a(6124);let s=async e=>{let t=await (0,n.m3)(e);if(t.status){let e=await l(t.token);if(e)return localStorage.setItem("userData",JSON.stringify({token:t.token,...e})),{token:t.token,...e}}return!1},o=async e=>{let t=await (0,n.aX)(e);if(t.status){let e=await l(t.data.token);if(null!==e)return localStorage.setItem("userData",JSON.stringify({token:t.data.token,...e})),{data:{token:t.data.token,...e},...t}}return t},i=()=>{if("undefined"!=typeof localStorage){let e=localStorage.getItem("userData");if(void 0!==e){let t=JSON.parse(e);if(t)return t}return null}return!1},l=async e=>{let t=await (0,n.w2)(e);return t.status?t.data:null},c=async e=>{let t=await (0,n.CY)(e);return t||null},d=()=>(localStorage.removeItem("userData"),(0,r.JF)())},4759:function(e,t,a){"use strict";a.d(t,{Gz:function(){return i},J7:function(){return c},JF:function(){return f},ak:function(){return u},d1:function(){return d},eO:function(){return o},sP:function(){return l},sU:function(){return p}});let r="https://staging.gerai.neracaruang.com/api",n="https://sso.otonometer.neracaruang.com/",s=()=>{if("undefined"!=typeof localStorage){let t=localStorage.getItem("userData");if(void 0!==t){var e;let a=null!==(e=JSON.parse(t))&&void 0!==e?e:"{}";return a.token}return""}},o=async e=>{try{let t=await fetch("".concat(r).concat(e),{method:"GET"});return t.json()}catch(e){return console.error("Error fetching data:",e),e}},i=async(e,t)=>{try{let a=await fetch("".concat(r).concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}),n=await a.json();return n}catch(e){return console.log("Error fetching data:",e),e}},l=async function(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t=""!==a?a:s();try{let a=await fetch("".concat(r).concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}),n=await a.json();return n}catch(e){return console.error("Error fetching data:",e),e}},c=async(e,t)=>{let a=s();try{let n=await fetch("".concat(r).concat(e),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)});return n.json()}catch(e){return console.error("Error fetching data:",e),e}},d=async(e,t)=>{let a=s(),n=new FormData;for(let e in t)if("object"==typeof t[e]){if(t[e]instanceof File)n.append(e,t[e]);else if(null!==t[e])for(let a=0;a<t[e].length;a++)n.append(e,t[e][a])}else n.append(e,t[e]);try{let t=await fetch("".concat(r).concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:n});return t.json()}catch(e){}},u=async()=>{window.location.href="".concat(n,"connect?id=").concat("71")},p=async e=>{try{let t=await fetch("".concat(n,"oauth/token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();return a}catch(t){let e={isError:!0,message:t.message};return e}},f=()=>{window.location.href="".concat(n,"logout")}}},function(e){e.O(0,[5876,2971,4123,1744],function(){return e(e.s=7829)}),_N_E=e.O()}]);